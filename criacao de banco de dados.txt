CREATE TABLE Empresa (
    id_empresa INTEGER PRIMARY KEY,
    nome_empresa TEXT NOT NULL,
    cnpj TEXT NOT NULL,
    telefone TEXT,
    email TEXT
);

CREATE TABLE Cliente (
    id_cliente INTEGER PRIMARY KEY,
    nome TEXT NOT NULL,
    cpf TEXT NOT NULL,
    email TEXT,
    telefone TEXT,
    fk_id_empresa INTEGER NOT NULL,
    FOREIGN KEY (fk_id_empresa) REFERENCES Empresa(id_empresa)
);

CREATE TABLE Endereco (
    id_endereco INTEGER PRIMARY KEY,
    rua TEXT NOT NULL,
    numero TEXT,
    bairro TEXT NOT NULL,
    cidade TEXT NOT NULL,
    fk_id_cliente INTEGER NOT NULL,
    FOREIGN KEY (fk_id_cliente) REFERENCES Cliente(id_cliente)
);

CREATE TABLE Plano (
    id_plano INTEGER PRIMARY KEY,
    nome_plano TEXT NOT NULL,
    velocidade TEXT NOT NULL,
    valor REAL NOT NULL,
    fk_id_empresa INTEGER NOT NULL,
    FOREIGN KEY (fk_id_empresa) REFERENCES Empresa(id_empresa)
);

CREATE TABLE Funcionario (
    id_funcionario INTEGER PRIMARY KEY,
    nome TEXT NOT NULL,
    cargo TEXT NOT NULL,
    telefone TEXT,
    fk_id_empresa INTEGER NOT NULL,
    FOREIGN KEY (fk_id_empresa) REFERENCES Empresa(id_empresa)
);

CREATE TABLE Fatura (
    id_fatura INTEGER PRIMARY KEY,
    valor REAL NOT NULL,
    data_emissao TEXT NOT NULL,
    data_vencimento TEXT NOT NULL,
    data_pagamento TEXT NOT NULL,
    fk_id_cliente INTEGER NOT NULL,
    fk_id_plano INTEGER NOT NULL,
    FOREIGN KEY (fk_id_cliente) REFERENCES Cliente(id_cliente),
    FOREIGN KEY (fk_id_plano) REFERENCES Plano(id_plano)
);

CREATE TABLE ChamadoTecnico (
    id_chamado INTEGER PRIMARY KEY,
    descricao TEXT NOT NULL,
    data_abertura TEXT NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('aberto', 'em_andamento', 'concluido')),
    fk_id_cliente INTEGER NOT NULL,
    fk_id_funcionario INTEGER NOT NULL,
    FOREIGN KEY (fk_id_cliente) REFERENCES Cliente(id_cliente),
    FOREIGN KEY (fk_id_funcionario) REFERENCES Funcionario(id_funcionario)
);





